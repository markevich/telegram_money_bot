defmodule MarkevichMoney.Pipelines.Reports.ReactionRenderer do
  use MarkevichMoney.LoggerWithSentry

  def render_empty_report_reaction() do
    sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üò†"]

    message = """
    –û–π, –∞ –∫–∞–∫ —Ç–∞–∫? –£ —Ç–µ–±—è –∂ —Å–æ–≤—Å–µ–º –Ω–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π! –ê –Ω—É-–∫–∞ –±–µ–≥–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è! –ù–∞–ø–∏—à–∏ /start, –∞ —è —Ç–µ–±–µ –≤—Å–µ –æ–±—ä—è—Å–Ω—é!
    """

    {:ok, message, sticker_id}
  end

  def render_short_report_reaction() do
    sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üëç"]

    message = """
    –ú—ã —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–∏ —Å—á–∏—Ç–∞—Ç—å —Ç–≤–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã, –ø–æ—ç—Ç–æ–º—É –º–Ω–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç.
    –ú–æ–∂–µ–º –≤–∑–≥–ª—è–Ω—É—Ç—å –ø–æ–∫–∞ –Ω–∞ —á—Ç–æ —Ç—ã —Ç—Ä–∞—Ç–∏–ª –∑–æ–ª–æ—Ç—ã–µ –Ω–µ–¥–∞–≤–Ω–æ. –ê –∫–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞–±–µ—Ä–µ—Ç—Å—è —Ü–∏—Ñ—Ä –∑–∞ –ø–æ–ª–Ω—ã—Ö –¥–≤–∞ –º–µ—Å—è—Ü–∞ - —Ç–æ–≥–¥–∞ –∏ –ø–æ–π–º—ë–º, —á—Ç–æ —Å —Ç–æ–±–æ–π –¥–µ–ª–∞—Ç—å: –±–∏—Ç—å –∫–ª—é–∫–æ–π –ø–æ –≥–æ–ª–æ–≤–µ –∏–ª–∏ –ø–æ—â–∞–¥–∏—Ç—å.
    """

    {:ok, message, sticker_id}
  end

  def render_full_report_reaction(percentage_diff: percentage, numeric_diff: diff) do
    human_diff = "`#{abs(diff)}(#{abs(percentage)}%)`"

    cond do
      abs(percentage) <= 5 ->
        sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üòê"]

        message = """
        –ù–∏ –∂–∞—Ä–∫–æ, –Ω–∏ —Ö–æ–ª–æ–¥–Ω–æ: —Ä–∞—Å—Ö–æ–¥—ã –æ—Å—Ç–∞–ª–∏—Å—å –Ω–∞ –ø—Ä–µ–∂–Ω–µ–º —É—Ä–æ–≤–Ω–µ, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–µ–Ω—è–ª–æ—Å—å.
        –•–æ—Ç—è –º–æ–≥–ª–æ –±—ã—Ç—å –∏ –ª—É—á—à–µ. –Ø —Ç–æ –≤ —Ç–≤–æ–∏ –≥–æ–¥—ã —É–∂–µ –Ω–∞ –ø–∞—Ä–æ–ª—ë—Ç –Ω–∞–∫–æ–ø–∏–ª!
        """

        {:ok, message, sticker_id}

      percentage > 5 && percentage <= 15 ->
        sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üò†"]

        message = """
        –ü–æ–π–¥–∏-–∫–∞ —Å—é–¥–∞, –µ—Å—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä!
        –ì–ª—è–Ω—å! –í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ —Ç–≤–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ #{human_diff} –∑–æ–ª–æ—Ç—ã—Ö.
        –ü—É—Å—Ç—è–∫–∏? –ê–≥–∞, —â–∞—Å! –ú–µ—Å—è—Ü-–¥—Ä—É–≥–æ–π - –∏ –±–µ–∑ —à—Ç–∞–Ω–æ–≤ –æ—Å—Ç–∞–Ω–µ—à—å—Å—è!
        –ú–æ–π —Ç–µ–±–µ —Å–æ–≤–µ—Ç - –ø–æ—É–º–µ—Ä—å –ø—ã–ª –∏ –Ω–∞—á–Ω–∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–≤–æ–∏–º–∏ —Ç—Ä–∞—Ç–∞–º–∏..
        """

        {:ok, message, sticker_id}

      percentage > 15 && percentage <= 40 ->
        sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üìâ"]

        message = """
        –£ —Ç–µ–±—è —Ç–∞–º –≤ —à—Ç–∞–Ω–∞—Ö –ø—Ä–æ—Ä–µ—Ö–∞ –∏–ª–∏ —à–æ?!
        –ò–Ω–∞—á–µ, –∫–∞–∫ —É —Ç–µ–±—è –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ —É—Ç–µ–∫–ª–æ –∞–∂ –Ω–∞ #{human_diff} –∑–æ–ª–æ—Ç—ã—Ö –±–æ–ª—å—à–µ, —á–µ–º –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º?!
        –ü—Ä–æ–¥–æ–ª–∂–∏—à—å —Ç—Ä–∞–Ω–∂–∏—Ä–∏—Ç—å –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ - –Ω–∞ —Å–µ–±–µ –ø–æ–∑–Ω–∞–µ—à—å –º–æ—â—å –º–æ–µ–π –∫–ª—é–∫–∏!
        """

        {:ok, message, sticker_id}

      percentage > 40 ->
        sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥ü§¨"]

        message = """
        –¢–´ –®–û –ù–ê–¢–í–û–†–ò–õ, –ë–ï–°–¢–û–õ–û–ß–¨?!
        –≠—Ç–æ –∂ –Ω–∞–¥–æ –±—ã–ª–æ —Ç–∞–∫ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å—Å—è! –ù–∞ #{human_diff} –∑–æ–ª–æ—Ç—ã—Ö –±–æ–ª—å—à–µ, —á–µ–º –≤ –ø—Ä–æ—à–ª–æ–º –º–µ—Å—è—Ü–µ!!!
        –ö–æ–≥–¥–∞ –∂—Ä–∞—Ç—å –Ω–µ—á–µ–≥–æ –±—É–¥–µ—Ç - –∫–æ –º–Ω–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏... –Ø –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–ª!
        """

        {:ok, message, sticker_id}

      percentage <= -5 && percentage >= -15 ->
        sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üëç"]

        message = """
        –û—Ç–ª–æ–∂–∏—à—å –º–æ–Ω–µ—Ç–∫—É —Å–µ–≥–æ–¥–Ω—è - –ø–æ—Å—Ç—Ä–æ–∏—à—å –¥–æ–º –∑–∞–≤—Ç—Ä–∞!
        –ù–∞—á–∏–Ω–∞—Ç—å –≤—Å–µ–≥–¥–∞ –Ω–∞–¥–æ —Å –º–∞–ª–æ–≥–æ. –í–æ—Ç –∏ —Ç–≤–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã —É–º–µ–Ω—å—à–∏–ª–∏—Å—å –Ω–∞ #{human_diff} –∑–æ–ª–æ—Ç—ã—Ö.
        –•–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç, —Ö–æ—Ç—è –º–æ–≥ –±—ã –∏ –ª—É—á—à–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–≤–æ–∏–º–∏ —Ç—Ä–∞—Ç–∞–º–∏...
        """

        {:ok, message, sticker_id}

      percentage < -15 && percentage >= -40 ->
        sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üëç"]

        message = """
        –û—Ç–≤–∞–ª–∏—Å—å –º–æ—è –±–æ—Ä–æ–¥–∞, —á—Ç–æ —è –≤–∏–∂—É! –ù–µ—É–∂—Ç–æ –∫—Ç–æ-—Ç–æ –∑–∞ —É–º –≤–∑—è–ª—Å—è!
        –ü–æ—Ç—Ä–∞—Ç–∏–ª –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ –Ω–∞ #{human_diff} –∑–æ–ª–æ—Ç—ã—Ö –º–µ–Ω—å—à–µ, —á–µ–º –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º.
        –ü–æ—Ö–≤–∞–ª—å–Ω–æ. –¢–∞–∫, –≥–ª—è–¥–∏, –∏ –ª—é–±–∏–º—ã–º —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏—á–∫–æ–º —Å—Ç–∞–Ω–µ—à—å!
        """

        {:ok, message, sticker_id}

      percentage < -40 ->
        sticker_id = Application.get_env(:markevich_money, :tg_file_ids)[:stickers][:"üë¥üëç"]

        message = """
        –î—É–º–∞–ª, –Ω–∞ —Å–≤–æ—ë–º –≤–µ–∫—É –Ω–µ –ø–æ–≤–µ–¥–∞—é –±–æ–ª—å—à–µ —á—É–¥–µ—Å, –∞ —Ç—É—Ç...
        –ù–µ —Ç–∞–∫–∞—è —É–∂ —Ç—ã –∏ –±–µ—Å—Ç–æ–ª–æ—á—å, –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è - —Å–æ—Ö—Ä–∞–Ω–∏–ª –Ω–∞ #{human_diff} –∑–æ–ª–æ—Ç—ã—Ö –±–æ–ª—å—à–µ, —á–µ–º –∑–∞ –º–µ—Å—è—Ü –¥–æ —ç—Ç–æ–≥–æ.
        –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ –∏ —Å–∫–æ—Ä–æ –º—ã...–∫—Ö–µ...—Ç—ã —Å—Ç–∞–Ω–µ—à—å –µ—â—ë –±–æ–≥–∞—á–µ!
        """

        {:ok, message, sticker_id}

      # coveralls-ignore-start
      true ->
        log_error_message(
          "Received unkown numbers for monthly report reaction renderer.",
          %{
            percentage: percentage,
            numeric_diff: diff
          }
        )

        # coveralls-ignore-stop
    end
  end
end
