defmodule MarkevichMoney.Pipelines.Help.Callbacks do
  use MarkevichMoney.Constants
  alias MarkevichMoney.CallbackData
  alias MarkevichMoney.Pipelines.Help.Messages, as: HelpPipeline
  alias MarkevichMoney.Steps.Telegram.{SendMessage, SendPhoto}

  def call(
        %CallbackData{
          callback_data: %{"pipeline" => @help_callback, "type" => @help_callback_newby}
        } = callback_data
      ) do
    payload = callback_data |> Map.from_struct()

    message = """
    `> ðŸ¤” Ð¯ Ð½Ð¾Ð²ÐµÐ½ÑŒÐºÐ¸Ð¹, Ð¿Ð¾Ð¼Ð¾Ð³Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒÑÑ!`

    ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð‘Ð¾Ñ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ!

    Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¿Ð¾ÑÐ»Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ Ñ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸, Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ð¾Ð¹ Ðº ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ â€œÐÐ»ÑŒÑ„Ð°-ÐšÐ»Ð¸Ðºâ€, Ð² Ð±Ð¾Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¾ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð¿Ð¾Ð´Ð¾Ð±Ð½Ð¾Ð³Ð¾ Ð²Ð¸Ð´Ð°.
    """

    payload
    |> Map.put(:output_message, message)
    |> SendMessage.call()

    payload
    |> Map.put(:output_file_id, get_file_id(:transaction_example))
    |> SendPhoto.call()

    message = """
    Ð‘Ð¾Ñ‚ ÑÑ‚Ð°Ñ€Ð°ÐµÑ‚ÑÑ ÑÐ°Ð¼ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÑ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸, Ð½Ð¾ Ð¿Ð¾Ð½Ð°Ñ‡Ð°Ð»Ñƒ Ð¾Ð½ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¾ÑˆÐ¸Ð±Ð¸Ñ‚ÑŒÑÑ Ð¸Ð»Ð¸ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð²Ð¾Ð²ÑÐµ. Ð¢ÑƒÑ‚ ÐµÐ¼Ñƒ Ð¿Ð¾Ð½Ð°Ð´Ð¾Ð±Ð¸Ñ‚ÑÑ Ñ‚Ð²Ð¾Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ: Ð½Ð°Ð¶Ð¼Ð¸ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ `ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ` Ð¸ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾ Ð²Ñ‹Ð±ÐµÑ€Ð¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ, Ðº ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÑÑ Ñ‚Ð²Ð¾Ñ Ñ‚Ñ€Ð°Ñ‚Ð°.

    Ð’ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ñ€Ð°Ð· Ð±Ð¾Ñ‚ ÑƒÐ¶Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð½Ð°Ñ‚ÑŒ, ÐºÐ°ÐºÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ ÐµÐ¼Ñƒ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ. ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð½ÑƒÐ¶Ð½Ð° Ð±Ð¾Ñ‚Ñƒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² ÑÐ°Ð¼Ð¾Ð¼ Ð½Ð°Ñ‡Ð°Ð»Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹: Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð½ÐµÐ´ÐµÐ»ÑŒ Ð¾Ð½ Ð½Ð°Ñ‡Ð½Ñ‘Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¸ÑÐ²Ð°Ð¸Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð²ÑÐµÐ¼ Ñ‚Ð²Ð¾Ð¸Ð¼ Ñ‚Ñ€Ð°Ñ‚Ð°Ð¼, Ð¸ Ð²Ñ‹Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ð½ÑƒÐ¶Ð½Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð·Ñ€ÐµÐ´ÐºÐ°, Ð² Ð½ÐµÐ·Ð½Ð°ÐºÐ¾Ð¼Ñ‹Ñ… Ð´Ð»Ñ Ð±Ð¾Ñ‚Ð° ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑÑ….

    Ð•ÑÐ»Ð¸ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð±Ð¾Ñ‚ Ð½Ðµ ÑƒÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð» ÐºÐ°ÐºÑƒÑŽ-Ñ‚Ð¾ Ñ‚Ñ€Ð°Ñ‚Ñƒ, Ñ‚Ð¾ Ð½Ð°Ð¶Ð¼Ð¸ ÐºÐ½Ð¾Ð¿ÐºÑƒ `Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ` Ð¿Ð¾Ð´ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸ÐµÐ¼ Ð¾ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸. *Ð¡Ð°Ð¼Ð¾ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑÑ‚Ð¾Ð¼ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ Ð½Ðµ Ð½Ð°Ð´Ð¾!*

    ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ð¾Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ð½Ð° `âŒÐ£Ð´Ð°Ð»Ð¸Ñ‚ÑŒâŒ` Ð¸ `ÐžÑ‚Ð¼ÐµÐ½Ð°`. Ð•ÑÐ»Ð¸ Ñ‚Ð¾Ñ‡Ð½Ð¾ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ñ‚Ñƒ, Ð¶Ð¼Ð¸ Ð½Ð° Ð¿ÐµÑ€Ð²ÑƒÑŽ ÐºÐ½Ð¾Ð¿ÐºÑƒ; ÐµÑÐ»Ð¸ Ð²ÑÑ‘-Ñ‚Ð°ÐºÐ¸ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°ÐµÑˆÑŒ, Ñ‚Ð¾ Ð¶Ð¼Ð¸ Ð½Ð° Ð²Ñ‚Ð¾Ñ€ÑƒÑŽ. ÐŸÐ¾ÑÐ»Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ ÑÐ»Ð¾Ð²Ð¾ `Ð£Ð´Ð°Ð»ÐµÐ½Ð¾`.

    Ð”Ð»Ñ Ñ‚Ð¾Ð³Ð¾ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ /help

    Ð’ Ð»ÑŽÐ±Ð¾Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ñƒ Ð±Ð¾Ñ‚Ð° Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ Ð¿Ð¾ Ñ‚Ð²Ð¾Ð¸Ð¼ Ñ‚Ñ€Ð°Ñ‚Ð°Ð¼ Ð·Ð° Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½Ñ‹Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸. ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ Ð¾Ð± ÑÑ‚Ð¾Ð¼ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ `ÐšÐ°Ðº Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ?`

    Ð‘Ð¾Ñ‚ Ð¼Ð¾Ð¶ÐµÑ‚ ÑƒÑ‡ÐµÑÑ‚ÑŒ Ð´Ð°Ð¶Ðµ Ñ‚Ñ€Ð°Ñ‚Ñ‹, ÑÐ´ÐµÐ»Ð°Ð½Ð½Ñ‹Ðµ Ð½Ð°Ð»Ð¸Ñ‡ÐºÐ¾Ð¹ Ð¸Ð»Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ°Ð¼Ð¸, ÐµÑÐ»Ð¸ Ñ‚Ñ‹ ÐµÐ¼Ñƒ Ð² ÑÑ‚Ð¾Ð¼ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑˆÑŒ. Ðž Ñ‚Ð¾Ð¼, ÐºÐ°Ðº Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ `ÐšÐ°Ðº Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ñ‚Ñƒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ?`

    Ð§ÑƒÐ²ÑÑ‚Ð²ÑƒÐµÑˆÑŒ, Ñ‡Ñ‚Ð¾ Ñ‚Ñ€Ð°Ñ‚Ð¸ÑˆÑŒ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð³Ð¾ Ð´ÐµÐ½ÐµÐ³ Ð½Ð° Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¾Ð´Ð½Ð¾? Ð¢Ñ‹ Ð¼Ð¾Ð¶ÐµÑˆÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð»Ð¸Ð¼Ð¸Ñ‚ Ñ‚Ñ€Ð°Ñ‚ Ð½Ð° Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ, Ð° Ð±Ð¾Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð¸Ñ‡ÐµÑÐºÐ¸ Ñ‚ÐµÐ±Ðµ Ð¾ Ð½Ñ‘Ð¼ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ñ‚ÑŒ. ÐÐ°ÑƒÑ‡Ð¸Ñ‚ÑŒÑÑ Ð²Ñ‹ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ñ€Ð°Ð·Ð´ÐµÐ»Ð° `Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð»Ð¸Ð¼Ð¸Ñ‚Ð°Ð¼Ð¸.`


    Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ñ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ñƒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ /help , Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ, ÐºÐ°Ðº Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ð´Ð¸Ð°Ð»Ð¾Ð³ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸.
    """

    payload
    |> Map.put(:output_message, message)
    |> SendMessage.call()

    payload
    |> HelpPipeline.call()
  end

  def call(
        %CallbackData{
          callback_data: %{"pipeline" => @help_callback, "type" => @help_callback_add}
        } = callback_data
      ) do
    message = """
    Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ
    """

    callback_data
    |> Map.from_struct()
    |> Map.put(:output_message, message)
    |> SendMessage.call()
  end

  def call(
        %CallbackData{
          callback_data: %{"pipeline" => @help_callback, "type" => @help_callback_stats}
        } = callback_data
      ) do
    message = """
    Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
    """

    callback_data
    |> Map.from_struct()
    |> Map.put(:output_message, message)
    |> SendMessage.call()
  end

  def call(
        %CallbackData{
          callback_data: %{"pipeline" => @help_callback, "type" => @help_callback_limits}
        } = callback_data
      ) do
    message = """
    Ð›Ð¸Ð¼Ð¸Ñ‚Ñ‹
    """

    callback_data
    |> Map.from_struct()
    |> Map.put(:output_message, message)
    |> SendMessage.call()
  end

  def call(
        %CallbackData{
          callback_data: %{"pipeline" => @help_callback, "type" => @help_callback_support}
        } = callback_data
      ) do
    message = """
    ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°
    """

    callback_data
    |> Map.from_struct()
    |> Map.put(:output_message, message)
    |> SendMessage.call()
  end

  def call(
        %CallbackData{
          callback_data: %{"pipeline" => @help_callback, "type" => @help_callback_bug}
        } = callback_data
      ) do
    message = """
    ÐžÑˆÐ¸Ð±ÐºÐ°
    """

    callback_data
    |> Map.from_struct()
    |> Map.put(:output_message, message)
    |> SendMessage.call()
  end

  defp get_file_id(picture_name) do
    Application.get_env(:markevich_money, :tg_file_ids)[:help][:newby][picture_name]
  end
end
